<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.ImageView?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.shape.Circle?>
<?import javafx.scene.control.cell.PropertyValueFactory?>

<HBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.controllers.DashboardController"
      styleClass="dashboard-container">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Left Panel - Profile and Stats -->
    <VBox spacing="15" prefWidth="300" styleClass="left-panel">
        <!-- Profile Section -->
        <VBox spacing="10" styleClass="profile-section">
            <StackPane fx:id="profilePicContainer" styleClass="profile-pic-container">
                <Circle fx:id="profilePicClip" radius="50"/>
                <ImageView fx:id="profilePic" fitHeight="100" fitWidth="100" preserveRatio="true"/>
            </StackPane>

            <VBox spacing="5" styleClass="profile-info">
                <Label fx:id="nameLabel" text="John Doe" styleClass="name-label"/>
                <Label fx:id="locationLabel" text="New York, USA" styleClass="location-label"/>
                <Label fx:id="bookHubIdLabel" text="ID: BH123456" styleClass="bookhub-id"/>
                <Button fx:id="editInfoButton" onAction="#handleEditInfo" text="Edit Profile" styleClass="edit-button"/>
            </VBox>
        </VBox>

        <!-- Quick Stats -->
        <VBox spacing="10" styleClass="stats-container">
            <Label text="Profile Overview" styleClass="section-header" />
            <GridPane hgap="20" vgap="10">
                <Label text="Total Uploads:" GridPane.rowIndex="0" GridPane.columnIndex="0" styleClass="stats-label"/>
                <Label fx:id="totalUploadsLabel" text="0" GridPane.rowIndex="0" GridPane.columnIndex="1" styleClass="stats-value"/>

                <Label text="Total Borrowed:" GridPane.rowIndex="1" GridPane.columnIndex="0" styleClass="stats-label"/>
                <Label fx:id="totalBorrowedLabel" text="0" GridPane.rowIndex="1" GridPane.columnIndex="1" styleClass="stats-value"/>

                <Label text="Buyer Rating:" GridPane.rowIndex="2" GridPane.columnIndex="0" styleClass="stats-label"/>
                <Label fx:id="buyerRatingLabel" text="4.5/5" GridPane.rowIndex="2" GridPane.columnIndex="1" styleClass="stats-value"/>
            </GridPane>
        </VBox>

        <!-- Footer -->
        <Region VBox.vgrow="ALWAYS"/>
        <VBox spacing="10" styleClass="footer-section">
            <Button fx:id="homeButton" onAction="#handleHome" text="Home" styleClass="home-button"/>
            <Button fx:id="logoutButton" onAction="#handleLogout" text="Logout" styleClass="logout-button"/>
            <Label fx:id="lastUpdateLabel" text="Last updated: " styleClass="update-label"/>
        </VBox>
    </VBox>

    <!-- Right Panel - Main Content -->
    <TabPane HBox.hgrow="ALWAYS" styleClass="content-tabs">
        <!-- Uploaded Books Tab -->
        <Tab text="Uploaded Books" closable="false">
            <VBox spacing="0" styleClass="tab-content">
                <HBox styleClass="tab-header-container">
                    <Label text="Your Uploaded Books" styleClass="content-section-header"/>
                </HBox>
                <TableView fx:id="uploadedBooksTable" VBox.vgrow="ALWAYS" styleClass="data-table">
                    <columns>
                        <TableColumn fx:id="uploadedTitleColumn" text="Book Title" prefWidth="150" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="title" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="uploadDateColumn" text="Upload Date" prefWidth="120" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="uploadDate" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="priceColumn" text="Price" prefWidth="100" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="price" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="totalPurchasesColumn" text="Total Purchases" prefWidth="120" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="totalPurchases" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="revenueColumn" text="Revenue" prefWidth="120" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="revenue" />
                            </cellValueFactory>
                        </TableColumn>
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <!-- Borrowed Books Tab -->
        <Tab text="Borrowed Books" closable="false">
            <VBox spacing="0" styleClass="tab-content">
                <HBox styleClass="tab-header-container">
                    <Label text="Your Borrowed Books" styleClass="content-section-header"/>
                </HBox>
                <TableView fx:id="borrowedBooksTable" VBox.vgrow="ALWAYS" styleClass="data-table">
                    <columns>
                        <TableColumn fx:id="borrowedTitleColumn" text="Book Title" prefWidth="150" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="title"/>
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="sellerNameColumn" text="Seller Id" prefWidth="100" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="sellerName" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="borrowDateColumn" text="Borrow Date" prefWidth="120" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="borrowDate" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="daysRemainingColumn" text="Days Remaining" prefWidth="120" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="daysRemaining" />
                            </cellValueFactory>
                        </TableColumn>
                        <TableColumn fx:id="statusColumn" text="Status" prefWidth="120" styleClass="table-column">
                            <cellValueFactory>
                                <PropertyValueFactory property="status" />
                            </cellValueFactory>
                        </TableColumn>
                    </columns>
                </TableView>
            </VBox>
        </Tab>

        <!-- Reviews Tab -->
        <Tab text="Buyer Reviews" closable="false">
            <VBox spacing="0" styleClass="tab-content">
                <HBox styleClass="tab-header-container">
                    <Label text="Your Reviews" styleClass="content-section-header"/>
                </HBox>
                <ListView fx:id="reviewsList" VBox.vgrow="ALWAYS" styleClass="reviews-list"/>
            </VBox>
        </Tab>
    </TabPane>
</HBox>